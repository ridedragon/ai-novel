# AI 小说生成器项目计划书 - 补充篇：资料库（Reference Library）组件设计

## 0.1 组件定位：写作的“硬核基石”

在文学创作尤其是科幻、历史、玄幻等题材中，严谨的资料考据是提升作品质感的关键。**资料库（Reference Library）** 组件位于“自动化创作中心”的最前端，作为所有 Agent 协作的底层数据源。它允许用户上传参考文档、记录考据笔记，并为 AI 提供精准的知识增强。

## 0.2 核心功能设计

### 0.2.1 资料载入与管理

* **附件上传**：支持 PDF、Word、TXT 等格式的资料上传。系统自动对其进行 OCR 识别和文本分块。
* **直建条目**：用户可直接在界面上创建“资料条目”（如：明朝官职表、量子力学基本原理、民俗传说笔记）。
* **标签系统**：为资料贴上“地理”、“历史”、“技术”、“民俗”等标签，便于 Agent 分类检索。

### 0.2.2 智能知识增强（RAG）

* **语义索引**：所有存入资料库的内容都会被自动向量化（Embedding）。
* **考据 Agent 联动**：当创作 Agent 写到“他在紫禁城内行走”时，资料库会自动检索并推送“明代紫禁城建筑分布”条目给 AI，确保描写不失真。

### 0.2.3 资料溯源

* **引用标注**：AI 在生成正文时，如果参考了资料库内容，会在侧边栏标注“考据来源”，方便作者查证。

## 0.3 界面逻辑规划

在 [`src/App.tsx`](src/App.tsx) 的“自动化创作中心”菜单中，资料库将作为第一个入口：

```mermaid
graph LR
    Menu[创作中心入口] --> KB[资料库: 考据与素材]
    KB --> Insp[灵感: 脑洞与发散]
    Insp --> World[世界观: 架构与规则]
    World --> Char[角色: 人设与动机]
    Char --> Plot[大纲: 冲突与节奏]
```

---

# 4.1.0 资料库组件 (Reference Library) - 核心功能详述

### A. 多模态附件上传与解析

* 支持拖拽上传。
* 集成 PDF.js 等前端解析工具，实现即时预览。
* **技术点**：利用本地 Web Worker 进行文本切片，减轻 UI 主线程压力。

### B. 资料编辑器

* 支持 Markdown 格式。
* 提供“资料模板”：如“历史背景模板”、“科学理论模板”、“地理环境模板”。

### C. 考据检索器

* 提供“写作时查阅”侧边栏。
* 支持“智能联想”：当作者光标停留在某个词语上时，资料库自动展示相关的背景资料。

---
*注：本组件将作为 Milestone 1 的优先开发项，为后续 Agent 提供“考据”能力。*
